{#
 # This file is part of Indico.
 # Copyright (C) 2002 - 2014 European Organization for Nuclear Research (CERN).
 #
 # Indico is free software; you can redistribute it and/or
 # modify it under the terms of the GNU General Public License as
 # published by the Free Software Foundation; either version 3 of the
 # License, or (at your option) any later version.
 #
 # Indico is distributed in the hope that it will be useful, but
 # WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 # General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
 # along with Indico;if not, see <http://www.gnu.org/licenses/>.
 #}
<h2 class="group-title">{% trans %}Registrants Statistics{% endtrans %}</h2>
<div class="i-box-group horz vert">
    {%- for data in stats -%}
        {% include 'events/registration/{}'.format(data.template) %}
    {%- endfor -%}
</div>
<script>
    $(document).ready(function loadProgressBars() {
        $('.i-progress>.i-progress-bar').width(function getProgress() {
            return $(this).data('progress');
        });
        $('.i-badge > .i-badge-value[data-value]').each(function loadValue() {
            var $this = $(this);
            var val = $this.data('value');
            if (val == 0) {
                $this.text(0);
                return;
            }
            jQuery({ Counter: 0 }).animate({ Counter: val }, {
                duration: 1000,
                easing: 'swing',
                step: function () {
                  $this.text(Math.ceil(this.Counter));
                }
            });
        })
    });
    $(document).on('click', 'table.registrant-stats tr.header-row', function toggleSubRows(evt) {
        console.log('toggle subrows')
        $(this).nextUntil('tr.header-row, tr.single-row').toggle();
        $(this).toggleClass('collapsed');
    });
</script>
