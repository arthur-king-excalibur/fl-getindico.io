<div class="form-row" data-tooltip-anchor>
    <input id="typeahead-{{ field.id }}" id="room-name" class="typeahead" type="text" 
        {% if field.data is not none %}
            value="{{ field._value() |tojson }}"
        {% endif %}
        name="{{ field.name }}"/>
    <span></span>
</div>


<script>

    (function() {
        var SEARCH_URL = {{ field.search_url |tojson}};

        var params = {
            load: function(query, callback) {
                if (!query.length) return callback();
                $.ajax(SEARCH_URL, {
                    data: {q: query}
                }).done(function(res) {
                    callback(res);
                })
            }
        }

        _(params).extend({{ options |tojson }});

        $('#typeahead-{{ field.id }}').selectize(params);
    })();
</script>
